---
name: Logto Configuration Fixes via M2M API
status: open
created: 2025-09-13T21:18:57Z
updated: 2025-09-13T23:04:23Z
github: https://github.com/julesintime/net-ecosystem-platform-max/issues/27
depends_on: [26]
parallel: false
conflicts_with: []
---

# Task: Logto Configuration Fixes via M2M API

## Description
Use Logto Management API with M2M credentials to programmatically fix missing redirect URI configuration and resolve sign-out errors. Focus on configuration-level fixes rather than code changes.

## Acceptance Criteria
- [ ] `http://localhost:6789` registered as valid `post_logout_redirect_uri` in Logto app
- [ ] OAuth callback redirect URIs properly configured  
- [ ] Sign-out flow completes without OIDC errors
- [ ] Configuration changes backed up before modification
- [ ] Rollback procedure documented and tested

## Technical Details

### M2M API Operations
- **Authenticate**: Use M2M credentials to get Management API access token
- **Read Current Config**: Export current app configuration for backup
- **Update Redirect URIs**: Add missing `post_logout_redirect_uri` values
- **Validate Changes**: Test configuration changes against live endpoints

### Configuration Updates Required
1. **Post-logout Redirect URI**: Add `http://localhost:6789` to allowed logout redirects
2. **OAuth Redirect URIs**: Verify `/callback` endpoint is properly registered
3. **Scope Configuration**: Ensure proper organization and profile scopes are configured
4. **Audience Settings**: Validate JWT audience configuration for API access

### Files to Modify/Create
- `scripts/logto-config-backup.js` - Export current configuration
- `scripts/logto-config-update.js` - Apply configuration fixes
- `scripts/logto-config-rollback.js` - Revert changes if needed

## Dependencies
- [ ] Task 001 completed (M2M credentials validated)
- [ ] Logto Management API access confirmed
- [ ] Current configuration documented as baseline

## Effort Estimate
- Size: M  
- Hours: 4 hours
- Parallel: false (depends on baseline establishment)

## Definition of Done
- [ ] Sign-out URL works without OIDC errors
- [ ] Configuration changes applied and verified
- [ ] Backup and rollback procedures tested
- [ ] All redirect URI configurations validated
- [ ] No authentication-related OIDC configuration errors
